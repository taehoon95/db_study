# 식별자(Identifiers)

### 1. 식별자의 개념
- 식별자란 하나의 엔터티에 구성되어 있는 여러 개의 속성 중에 엔터티를 대표할 수 있는 속성
- 하나의 엔터티는 반드시 하나의 유일한 식별자가 존재해야 한다. 
- 보통 식별자와 키(Key)를 동일하게 생각하는 경우가 있는데 
  - 논리 데이터 모델링 단계: 식별자 
  - 물리 데이터 모델링 단계: 키(데이터베이스 테이블에 접근을 위한 매개체)
 
### 2. 식별자의 특징
- 주식별자의 특징
![image](https://user-images.githubusercontent.com/77867084/155476415-bec036df-1abb-470b-a412-9a9d72283334.png)

- 대체식별자의 특징은 주식별자의 특징과 일치
- 외부식별자의 특징 
  - 외부식별자의 경우 주식별자 특징과 일치하지 않으며 참조무결성 제약조건(Referential Integrity)에 따른 특징을 가지고 있다.

### 3. 식별자 분류
- 외부식별자: 타 엔터티와의 관계를 통해 타 엔터티로부터 받아오는 식별자
- 단일식별자: 하나의 속성으로 구성된 식별자
- 외부식별자: 타 엔터티와의 관계를 통해 타 엔터티로부터 받아오는 식별자
- 본질식별자: 업무에 의해 만들어지는 식별자
- 인조식별자: 업무에 의해 만들어지지는 않지만  원조식별자가 복잡한 구성을 가지고 있기 때문에 인위적으로 만든 식별자
![image](https://user-images.githubusercontent.com/77867084/155477341-01fcc698-67d1-44d7-a9b8-ed571f017351.png)

#### 3-1. 식별자 표기법
- 데이터 모델에서 표현
![image](https://user-images.githubusercontent.com/77867084/155477889-f27b4fd2-a166-4eef-88b2-efc480a41e0a.png)

### 4. 주식별자 도출기준
데이터 모델링 작업에서 중요한 작업 중의 하나가 주식별자 도출작업이다. 주식별자를 도출하기 위한 기준을 정리하면 다음과 같다.


- 해당 업무에서 자주 이용되는 속성을 주식별자로 지정한다.(예: 흔히 사원관리시 주민번호와 사원번호 중 사원번호를 주식별자로 사용한다.)
- 명칭, 내역 등과 같이 이름으로 기술되는 것들은 가능하면 주식별자로 지정하지 않는다.(예: 부서명, 회사명을 주식별자로 사용할 수 있어도 부서코드, 회사코드를 만들어 주식별자로 사용하는 경우)
- 복합으로 주식별자로 구성할 경우 너무 많은 속성이 포함되지 않도록 한다.
  
  - 아래 그림처럼 일반적으로 주식별자의 속성의 개수가 많다면 새로운 인조식별자를 생성하여 데이터 모델을 구성하는 것이 데이터 모델을 한층 더 단순하게 하고 애플리케이션을 개발할 때 조건절을 단순하게 할 수 있는 방법이 될 수 있다.
  - ![image](https://user-images.githubusercontent.com/77867084/155478912-019834ef-5df8-48f6-b462-a457d75a9b10.png)
  
    - SELECT 계약금 FROM 접수 WHERE 접수.접수일자 = ‘2010.07.15“ AND 접수.관할부서 = ‘1001’ AND 접수.입력자사번 = ‘AB45588' AND 접수.접수방법코드 = ‘E' AND 접수.신청인구분코드 = ‘01' AND 접수.신청인주민번호 = ‘7007171234567' AND 접수.신청횟수 = ‘1’
  
  

  - 이렇게 된 SQL문장을 접수번호라고 하는 인조식별자로 대체했다고 하면 특정신청인의 계약금 조회는 다음과 같이 간단하게 할 수 있다.


     - SELECT 계약금 FROM 접수 WHERE 접수.접수일자 = ‘100120100715001'
  
### 5. 식별자관계와 비식별자관계에 따른 식별자

#### 5-1. 식별자관계와 비식별자 관계의 결정
- 자식엔터티에서 부모엔터티로부터 받은 외부식별자(Foreign Key역할)를 자신의 주식별자로 이용할 것인지 또는 부모와 연결이 되는 속성으로서만 이용할 것인지를 결정해야 한다.

#### 5-2. 식별자 관계
- 부모로부터 받은 식별자를 자식엔터티의 주식별자로 이용하는 경우는 Null값이 오면 안되므로 반드시 부모엔터티가 생성되어야 자기 자신의 엔터티가 생성되는 경우이다. 
- 1:1의 관계: 부모로부터 받은 속성을 자식엔터티가 모두 사용하고 그것만으로 주식별자로 사용한다면 부모엔터티와 자식엔터티의 관계
- 1:M 관계: 부모로부터 받은 속성을 포함하여 다른 부모엔터티에서 받은 속성을 포함하거나 스스로 가지고 있는 속성과 함께 주식별자로 구성되는 경우는 가 된다.
  
![image](https://user-images.githubusercontent.com/77867084/155480394-a1211ae8-b5f6-4ee0-a252-fd79a452a09c.png)

#### 5-3 비식별자 관계
1) 자식엔터티에서 받은 속성이 반드시 필수가 아니어도 무방하기 때문에 부모 없는 자식이 생성될 수 있는 경우이다.

2) 엔터티별로 데이터의 생명주기(Life Cycle)를 다르게 관리할 경우이다. 예를 들어 부모엔터티에 인스턴스가 자식의 엔터티와 관계를 가지고 있었지만 자식만 남겨두고 먼저 소멸될 수 있는 경우가 이에 해당된다. 이에 대한 방안으로 물리데이터베이스 생성 시 Foreign Key를 연결하지 않는 임시적인 방법을 사용하기도 하지만 데이터 모델상에서 관계를 비식별자관계로 조정하는 것이 가장 좋은 방법이다.

3) 여러 개의 엔터티가 하나의 엔터티로 통합되어 표현되었는데 각각의 엔터티가 별도의 관계를 가질 때이며 이에 해당된다.

![image](https://user-images.githubusercontent.com/77867084/155481705-d32e5659-6399-4c0a-9ccf-3442d950befb.png)

- 위 그림은 접수엔터티가 인터넷접수, 내방접수, 전화접수가 하나로 통합되어 표현되어 있는 경우에 해당되며 통합된 엔터티에 각각의 엔터티가 별도의 관계를 가지고 있고 각각의 관계로부터 받은 주식별자를 접수엔터티의 주식별자로 사용할 수 없는 모습을 보여준다.

4) 자식엔터티에 주식별자로 사용하여도 되지만 자식엔터티에서 별도의 주식별자를 생성하는 것이 더 유리하다고 판단될 때 비식별자 관계에 의한 외부식별자로 표현한다.

![image](https://user-images.githubusercontent.com/77867084/155481945-b2cedc93-5cb9-4e04-aad8-015b9b3c3ae0.png)
-  위 그림은 계약이 반드시 사원에 의해 이루어져 사원번호와 계약번호로 주식별자를 구성할 수 있지만 계약번호 단독으로도 계약 엔터티의 주식별자를 구성할 수 있으므로 하나만 가지고 있는 것이 더 효율적이라고 판단하여 계약번호만 주식별자로 하고 계약사원번호는 일반속성 외부식별자로서 사용하게 된 경우이다.

#### 5-4 식별자관계와 비식별자관계 모델링
1)  비식별자관계 선택 프로세스
 흐름(Flow)에 따라 비식별자관계를 선정한다면 합리적으로 관계를 설정하는 모습이 될 수 있다. 기본적으로 식별자관계로 모든 관계가 연결되면서 다음 조건에 해당할 경우 비식별자관계로 조정하면 된다.

![image](https://user-images.githubusercontent.com/77867084/155483302-d2961e5c-0094-4ce7-8ce6-296ecc1c57ce.png)

2) 식별자와 비식별자관계 비교
강한 관계인 식별자관계와 약한 관계인 비식별자관계를 비교
![image](https://user-images.githubusercontent.com/77867084/155483546-2d0e7981-3e19-4db9-b695-788e3a50454a.png)

3) 식별자와 비식별자를 적용한 데이터 모델
![image](https://user-images.githubusercontent.com/77867084/155483747-9cf6bce3-9fe6-482e-8ef9-ce39336026ef.png)